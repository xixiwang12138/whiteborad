<!--square.wxml-->
<canvas type='webgl' id="main-canvas"></canvas>

<view class="content">
  <view class="container-top">
    <avatar-display wx:if="{{!runtimeFocus}}"
                    avatar="{{player.avatarUrl}}" name="{{player.name}}" />
  </view>
  <gold-level-display wx:if="{{!runtimeFocus}}"
                      gold="{{player.gold}}" level="99" expRate="0.2333" />
  <view class="room-name">
    <input class="text" value="摆烂小屋" placeholder="房间名不能为空~"></input>
  </view>
  <view wx:if="{{!runtimeFocus}}" class="focus-btn"
        bindtap="onClickShow" data-window="Start">
    <view class="text">专注</view>
  </view>
</view>

<van-dialog use-slot show="{{ isShowStartWindow }}"
            show-confirm-button="{{false}}"
            bind:close="onClickHide"
            close-on-click-overlay
            data-window="Start">
  <view class="start-config">
    <view class="start-config-top">
      <image class="top-img" src="/assets/main/desc.png" mode="heightFix"/>
      <image class="top-img" src="/assets/main/close.png" mode="heightFix"
             bindtap="onClickHide" data-window="Start"/>
    </view>
    <image class="clock-img" src="/assets/main/clock.png" mode="widthFix"/>
    <van-slider value="{{focus.duration}}"
                min="{{item.minDuration}}"
                max="{{item.maxDuration}}"
                bind:drag="onDragTime"/>
    <view class="time">
      专注时长
      <text>{{focus.duration}}</text>
      /min
    </view>
    <view class="content">
      <view class="desc">专注内容</view>
      <view class="btn" bindtap="onClickShow"
            data-window="Tags">{{focusTags[focus.tagIdx]}}</view>
    </view>
    <view class="mode-set">
      <view class="mode {{focus.mode == 0 ? 'selected' : ''}}"
            bind:tap="onModeTab" data-index="{{0}}">基础模式</view>
      <view class="mode {{focus.mode == 1 ? 'selected' : ''}}"
            bind:tap="onModeTab" data-index="{{1}}">反盖模式</view>
    </view>
    <view class="text">完成后经验+{{focus.expectExpGain}} 金币+{{focus.expectGoldGain}}</view>
    <view class="text">超时后可以继续获得奖励哦～</view>
    <view class="start-btn" bind:tap="onSubmit">开始专注</view>
  </view>
</van-dialog>

<van-dialog use-slot show="{{ isShowRoomWindow }}"
            show-confirm-button="{{false}}"
            bind:close="onClickHide"
            close-on-click-overlay
            data-window="Room">
  <view class="room-config">
    <view class="color-block">
      <view class="color-topic">主题色</view>
      <view class="color-set">
        <view class="color"></view>
        <view class="color"></view>
      </view>
    </view>
    <view class="shade-block">
      <view class="shade-topic">光影</view>
      <image src="/assets/main/sun.png" class="btn" mode="widthFix"></image>
      <image src="/assets/main/lunar.png" class="btn" mode="widthFix"></image>
      <image src="/assets/main/time.png" class="btn" mode="widthFix"></image>
    </view>
    <view class="save-btn">
      <view class="text">保存</view>
    </view>
  </view>
</van-dialog>

<van-dialog use-slot show="{{ isShowTagsWindow }}"
            show-confirm-button="{{false}}"
            bind:close="onClickHide"
            close-on-click-overlay
            data-window="Tags">
  <view class="selector-config">
    <view class="content">
      <view wx:for="{{focusTags}}"
            class="btn {{focus.tagIdx == index ? 'selected' : ''}}"
            bind:tap="onTagTab" data-index="{{index}}">{{item}}</view>
    </view>
    <view class="selector-btn" bindtap="onClickHide"
          data-window="Tags">完成</view>
  </view>
</van-dialog>

<real-tab-bar curPageIndex="0" wx:if="{{!runtimeFocus}}"></real-tab-bar>
